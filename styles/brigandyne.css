/* ==========================================
   STYLE GLOBAL "DARK FANTASY"
========================================== */
.sheet.brigandyne2 .window-content {
    background-image: url(../assets/ui/fond-metal.webp) !important; 
    background-size: cover !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
    padding: 15px;
    overflow-y: auto;
}

.sheet.brigandyne2 form { background: transparent !important; }
.brigandyne2.sheet { font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif; color: #e0e0e0; }

.main-title {
    text-align: center; font-family: "Georgia", serif; font-size: 2em;
    letter-spacing: 5px; text-transform: uppercase; color: #8b0000;
    margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
}

/* ==========================================
   UTILITAIRES DE MISE EN PAGE (FLEXBOX)
========================================== */
.flex-row { display: flex; }
.flex-col { display: flex; flex-direction: column; }
.flex-1 { flex: 1; }
.flex-2 { flex: 2; }
.gap-3 { gap: 3px; }
.gap-5 { gap: 5px; }
.gap-10 { gap: 10px; }
.gap-20 { gap: 20px; }
.align-center { align-items: center; }
.align-stretch { align-items: stretch; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.text-center { text-align: center; }
.w-100 { width: 100%; }
.m-0 { margin: 0; }
.mt-5 { margin-top: 5px; }
.mt-10 { margin-top: 10px; }
.mt-15 { margin-top: 15px; }
.mb-5 { margin-bottom: 5px; }
.mb-10 { margin-bottom: 10px; }
.mb-15 { margin-bottom: 15px; }
.pt-4 { padding-top: 4px; }
.pt-10 { padding-top: 10px; }
.px-5 { padding: 0 5px; }
.min-h-100 { min-height: 100px; }
.cursor-pointer { cursor: pointer; }

/* BORDURES & COULEURS DE TEXTE */
.border-top { border-top: 1px solid #444; }
.border-bottom-purple { border-bottom: 1px solid #8e44ad; }
.border-bottom-blue { border-bottom: 1px solid #4a6491; }
.color-purple { color: #8e44ad; }
.color-blue { color: #4a6491; }
.color-gold { color: #d4af37; }
.color-light { color: #e0e0e0; }
.font-bold { font-weight: bold; }
.font-georgia { font-family: 'Georgia', serif; }
.font-08 { font-size: 0.8em; }
.font-085 { font-size: 0.85em; }
.font-09 { font-size: 0.9em; }
.font-095 { font-size: 0.95em; }
.text-muted { color: #aaa; font-size: 0.85em; }
.text-highlight { color: #85c1e9; font-weight: bold; }
.text-danger { color: #ff5252; font-weight: bold; }

/* ==========================================
   INPUTS ET TEXTES
========================================== */
.brigandyne2 input[type="text"],
.brigandyne2 input[type="number"],
.brigandyne2 select {
    background: rgba(255, 255, 255, 0.05);
    border: none; border-bottom: 1px solid #444; border-radius: 2px;
    color: #e0e0e0; font-family: inherit; padding: 4px;
}
.brigandyne2 input:focus, .brigandyne2 select:focus {
    border-bottom: 2px solid #9e0b0f; background: rgba(255, 255, 255, 0.08); outline: none;
}
.brigandyne2 select option { background-color: #1a1a1a; color: #e0e0e0; }

/* ==========================================
   EN-TÊTE DE L'ACTEUR
========================================== */
.sheet-header-actor { display: flex; align-items: flex-start; gap: 20px; margin-bottom: 15px; }
.item-header-main { border-bottom: 2px solid #555; padding-bottom: 10px; margin-bottom: 20px; }
.actor-profile-img { flex: 0 0 160px; height: 250px; object-fit: cover; border: 2px solid #111; border-radius: 5px; background: #000; }
.item-header-img { flex: 0 0 64px; width: 64px; height: 64px; border: 1px solid #111; border-radius: 5px; background: #000; }

.header-bio { flex: 1; display: flex; flex-direction: column; gap: 8px; }
.bio-line { display: flex; align-items: center; }

.bio-label { 
    flex: 0 0 120px; font-weight: bold; color: #000 !important; 
    text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.6); 
}

.header-bio .bio-input, .header-bio .bio-input-readonly, .header-bio .charname { 
    flex: 1; color: #000 !important; background: rgba(255, 255, 255, 0.7) !important; 
    font-weight: bold; border: 1px solid #333; padding: 4px; border-radius: 3px;
}

.header-resources { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; border-top: 1px solid #333; padding-top: 10px; }
.resource-box { display: flex; align-items: center; gap: 5px; padding: 5px 10px; background: rgba(0,0,0,0.3); border: 1px solid #444; border-radius: 4px; }
.resource-box label { font-weight: bold; text-transform: uppercase; font-size: 0.9em; }
.resource-box input { width: 45px; text-align: center; font-size: 1.2em; font-weight: bold; background: transparent; border: none; }
.resource-box span { font-size: 1.1em; color: #777; font-weight: bold; }
.resource-box.vit { border-color: #8b0000; } .resource-box.vit label { color: #ffcccc; }
.resource-box.sf { border-color: #1a5b1a; } .resource-box.sf label { color: #a5d6a7; }
.resource-box.des { border-color: #d4af37; } .resource-box.des label { color: #fff59d; }
.resource-box.px { border-color: #4a6491; } .resource-box.px label { color: #85c1e9; }

.header-stats { flex: 0 0 140px; display: flex; flex-direction: column; gap: 10px; }
.combat-box { text-align: center; border-radius: 4px; padding: 10px 5px; box-shadow: inset 0 0 10px rgba(0,0,0,0.8); }
.combat-box label { display: block; font-size: 0.9em; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; color: #ccc; }
.combat-box span { display: block; font-size: 2.2em; font-weight: bold; color: #fff; text-shadow: 0 0 5px #000; }
.combat-box.init { background: #5e0808; border: 1px solid #8b0000; }
.combat-box.prot { background: #222; border: 1px solid #555; }
.malus-armure { text-align: center; margin-top: 5px; font-size: 0.9em; color: #aaa; }

/* JET D'INITIATIVE HOVER */
.roll-init { cursor: pointer; transition: 0.2s; }
.roll-init:hover { color: #fff !important; text-shadow: 0 0 8px #fff; }

/* ==========================================
   ONGLETS
========================================== */
.sheet-tabs { display: flex; border-bottom: 2px solid #555; margin: 15px 0; padding: 0; }
.sheet-tabs .item { padding: 8px 15px; font-weight: bold; text-transform: uppercase; color: #000 !important; cursor: pointer; transition: 0.2s; background: rgba(255,255,255,0.6); border-top-left-radius: 5px; border-top-right-radius: 5px; margin-right: 2px;}
.sheet-tabs .item:hover { background: rgba(255,255,255,0.8); }
.sheet-tabs .item.active { border-bottom: 2px solid #8b0000; background: rgba(255,255,255,0.9); }

/* ==========================================
   CARACTÉRISTIQUES (STATS)
========================================== */
.stats-container { display: flex; gap: 20px; align-items: flex-start; }
.competences-col { flex: 0 0 45%; background: rgba(0,0,0,0.2); padding: 10px; border: 1px solid #333; border-radius: 4px; }
.comp-header { display: flex; border-bottom: 2px solid #555; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold; font-family: 'Georgia', serif; font-size: 0.8em; text-transform: uppercase; color: #aaa; }

.stat-row { display: flex; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.03); padding-bottom: 3px; margin-bottom: 4px; }
.stat-label { flex: 2; cursor: pointer; font-size: 1.05em; color: #ccc; font-weight: bold; }
.stat-label:hover { color: #e74c3c; text-shadow: 0 0 5px rgba(231,76,60,0.5); }
.stat-base { flex: 0 0 35px; text-align: center; }
.stat-base input { width: 100%; height: 22px; text-align: center; }
.stat-prog { flex: 0 0 80px; text-align: center; }

.prog-box { display: inline-block; width: 12px; height: 12px; border: 1px solid #777; cursor: pointer; transition: 0.2s; background: rgba(0,0,0,0.5); border-radius: 2px; }
.prog-box.checked { background: #8b0000; border-color: #ff5252; box-shadow: 0 0 5px rgba(139,0,0,0.8); }
.prog-box.locked { border-color: #333; opacity: 0.5; background: repeating-linear-gradient(45deg, #111, #111 2px, #333 2px, #333 4px); cursor: not-allowed; }
.prog-box:hover:not(.locked) { border-color: #fff; transform: scale(1.2); }

.stat-actual { flex: 0 0 45px; display: flex; justify-content: flex-end; }
.actual-box { width: 35px; height: 26px; line-height: 26px; text-align: center; background: #8b0000; color: #fff; font-weight: bold; font-size: 1.1em; border: 1px solid #ff5252; border-radius: 3px; }

.handicaps-box { margin-top: 15px; border-top: 2px solid #8b0000; padding-top: 10px; }
.handicaps-title { margin: 0 0 10px 0; font-family: 'Georgia', serif; font-size: 1em; color: #ffcccc; text-transform: uppercase; }
.handicaps-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 4px; font-size: 0.85em; color: #ccc; }
.handicap-label { cursor: pointer; display: flex; align-items: center; gap: 5px; }

.ignore-handicap-btn { display: inline-block; background: #8b0000; color: #fff; padding: 5px 10px; border-radius: 3px; font-size: 0.8em; font-weight: bold; cursor: pointer; border: 1px solid #ff5252; margin-top: 10px; }
.ignore-handicap-btn:hover { background: #e74c3c; }

/* ==========================================
   LISTES (Items, Armes, Sorts, etc.)
========================================== */
.right-col { flex: 1; display: flex; flex-direction: column; gap: 15px; }
.item-section { background: rgba(0,0,0,0.2); padding: 10px; border: 1px solid #333; border-radius: 4px; margin-bottom: 15px; }
.item-header { display: flex; justify-content: space-between; border-bottom: 2px solid #8b0000; margin-bottom: 10px; padding-bottom: 5px; }
.item-header.gold { border-color: #d4af37; } .item-header.blue { border-color: #4a6491; }
.item-header.green { border-color: #1a5b1a; } .item-header.purple { border-color: #8e44ad; }
.item-header.grey { border-color: #555; }

.item-title { margin: 0; font-family: 'Georgia', serif; color: #e0e0e0; }
.item-title.colored-blue { color: #85c1e9; } .item-title.colored-gold { color: #d4af37; }
.item-title.colored-green { color: #1a5b1a; }

.item-list { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 5px; }
.item-entry { display: flex; align-items: center; padding: 5px 0; border-bottom: 1px dashed #555; gap: 10px;}
.item-entry.no-border { border-bottom: none; padding: 2px 0; }

.item-name-col { flex: 2; display: flex; align-items: center; }
.item-image { width: 28px; height: 28px; margin-right: 8px; border-radius: 3px; border: 1px solid #444; }
.item-image.large { width: 48px; height: 48px; } .item-image.small { width: 24px; height: 24px; }
.item-image.rollable { cursor: pointer; transition: 0.2s; }
.item-image.rollable:hover { border-color: #e74c3c; transform: scale(1.1); box-shadow: 0 0 5px rgba(231,76,60,0.5); }
.border-dark { border: 1px solid #222; }

.item-label { margin: 0; font-weight: bold; color: #e0e0e0; font-size: 1em; cursor: pointer; }
.item-details-col { flex: 1; text-align: center; color: #aaa; font-size: 0.9em; }

.item-controls { flex: 0 0 50px; text-align: right; display: flex; gap: 8px; justify-content: flex-end; }
.item-control { color: #777; cursor: pointer; font-size: 1.1em; }
.item-control:hover { color: #fff; } .item-control.item-delete:hover { color: #e74c3c; }
.item-control.career-archive { color: #d4af37; font-size: 0.9em; }

.item-summary { display: none; padding: 5px 10px; font-size: 0.85em; color: #aaa; border-left: 2px solid #555; background: rgba(0,0,0,0.05); margin-top: 5px; }
.magic-item-bg { background: rgba(0,0,0,0.2); padding: 5px; border: 1px solid #444; border-radius: 3px; }

/* ==========================================
   MAGIE
========================================== */
.magic-labels { width: 60px; font-weight: bold; color: #ccc; }
.spell-box { display: inline-block; width: 16px; height: 16px; border: 1px solid #777; cursor: pointer; transition: 0.2s; }
.spell-box:hover { border-color: #fff; transform: scale(1.1); }
.spell-box.empty { background: rgba(255, 255, 255, 0.05); }
.spell-box.tours { background: #4a6491; box-shadow: 0 0 5px rgba(74,100,145,0.5); }
.spell-box.sorts { background: #d32f2f; box-shadow: 0 0 5px rgba(211,47,47,0.5); }
.spell-box.rituels { background: #1a5b1a; box-shadow: 0 0 5px rgba(26,91,26,0.5); }

/* ==========================================
   BIOGRAPHIE & HISTORIQUE ET EDITEUR 
========================================== */
.history-row { display: flex; gap: 20px; margin-bottom: 20px; }
.history-col { flex: 1; display: flex; flex-direction: column; gap: 10px; }
.history-col-h100 { height: 100%; }

.editor-container { 
    background: rgba(0,0,0,0.1); border: 1px solid #444; padding: 10px; border-radius: 4px; 
    min-height: 250px; display: flex; flex-direction: column; color: #e0e0e0;
}
.editor-container .editor { flex: 1; display: flex; flex-direction: column; min-height: 230px; }
.editor-container .editor-content { flex: 1; min-height: 230px; padding: 5px; overflow-y: auto; }
.editor-container .editor-edit { right: 0; top: -5px; background: #111; border: 1px solid #444; color: #fff; padding: 5px; border-radius: 3px; }

.empty-slot { text-align: center; color: #777; font-style: italic; padding: 10px; }

/* ==========================================
   GRILLES DES ITEMS (Item Sheet)
========================================== */
.item-grid { display: flex; flex-direction: column; gap: 10px; }
.form-group-item { display: flex; justify-content: space-between; align-items: center; }
.form-group-item label { font-weight: bold; color: #ccc; }
.form-group-item select, .form-group-item input { width: 50%; }
.form-group-item.col { flex-direction: column; align-items: flex-start; }
.form-group-item.col select, .form-group-item.col input { width: 100%; margin-top: 5px; }

.stats-modifiers-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
.stat-mod { display: flex; flex-direction: column; align-items: center; background: rgba(0,0,0,0.2); border: 1px solid #444; padding: 5px; border-radius: 4px; }
.stat-mod label { font-size: 0.8em; text-transform: uppercase; }
.stat-mod input { text-align: center; font-size: 1.2em; font-weight: bold; width: 100%; }
/* ==========================================
   PERSONNALISATION DE L'INTERFACE FOUNDRY
========================================== */

/* 1. Remplacer le fond de l'application (quand aucune scène n'est active) */
/* 1. Remplacer le fond de l'application (quand aucune scène n'est active) */
body.vtt {
    background-image: url(../assets/ui/background2.webp) !important;
    background-size: cover !important;
    background-position: center center !important;
    background-repeat: no-repeat !important;
    background-color: #000 !important;
    
    /* LES DEUX LIGNES MAGIQUES POUR FORCER LE PLEIN ÉCRAN : */
    height: 100vh !important; 
    background-attachment: fixed !important;
}

/* 2. Remplacer le Logo Foundry en haut à gauche */
#logo {
    content: url(../assets/ui/brigandyne-logo.webp) !important;
    /* Tu peux ajuster la hauteur ici si ton logo est trop grand/petit */
    height: 50px !important; 
    margin-top: 5px;
}

/* 3. Remplacer l'icône de Pause (l'horloge par défaut) */
#pause img {
    content: url(../assets/ui/pause.webp) !important;
    /* Foundry va continuer de faire tourner cette image par défaut ! */
}

/* OPTIONNEL : Customiser aussi le texte "En Pause" sous l'icône */
#pause figcaption {
    font-family: "Georgia", "Palatino Linotype", serif !important;
    color: #8b0000 !important; /* Texte en rouge sang */
    text-shadow: 0 0 5px #000 !important; /* Ombre noire pour bien lire */
    font-weight: bold !important;
    font-size: 2em !important;
}
/* ==========================================
   CHAT CARDS (JETS DE DÉS ET COMBAT)
========================================== */
.brigandyne2-roll {
    background: rgba(0, 0, 0, 0.85);
    border: 1px solid #444;
    border-radius: 5px;
    padding: 10px;
    color: #e0e0e0;
    font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
    box-shadow: 0 0 10px rgba(0,0,0,0.8);
}

.brigandyne2-roll h3 {
    border-bottom: 1px solid #555;
    padding-bottom: 5px;
    margin-bottom: 10px;
    color: #fff;
    font-family: 'Georgia', serif;
    text-transform: uppercase;
    font-size: 1.1em;
    text-align: center;
}

/* Zone du dé */
.brigandyne2-roll .dice-result {
    margin: 10px 0;
    text-align: center;
}

/* Le gros carré avec le score */
.brigandyne2-roll .dice-total {
    display: inline-block;
    font-size: 2.2em;
    font-weight: bold;
    padding: 5px 20px;
    border-radius: 5px;
    text-shadow: 1px 1px 3px #000;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
}

/* Textes de résultat (Réussite, Echec...) */
.brigandyne2-roll .roll-result {
    font-size: 1.2em;
    margin-top: 5px;
    padding: 3px;
    border-radius: 3px;
    text-shadow: 1px 1px 2px #000;
}

/* --- COULEURS DES RÉUSSITES ET ÉCHECS --- */
.brigandyne2-roll .success { 
    color: #a5d6a7; border: 1px solid #1a5b1a; background: rgba(26, 91, 26, 0.5); 
}
.brigandyne2-roll .major-success { 
    color: #81c784; border: 1px solid #2e7d32; background: rgba(46, 125, 50, 0.7); 
}
.brigandyne2-roll .crit-success { 
    color: #d4af37; border: 1px solid #b8860b; background: rgba(184, 134, 11, 0.5); text-shadow: 0 0 8px #d4af37; 
}
.brigandyne2-roll .fail { 
    color: #ffcccc; border: 1px solid #8b0000; background: rgba(139, 0, 0, 0.5); 
}
.brigandyne2-roll .major-fail { 
    color: #ff5252; border: 1px solid #b71c1c; background: rgba(183, 28, 28, 0.7); 
}
.brigandyne2-roll .crit-fail { 
    color: #fff; border: 1px solid #ff0000; background: rgba(255, 0, 0, 0.8); text-shadow: 0 0 8px #ff0000; 
}

/* --- ENCADRÉS DE DÉGÂTS (Armes & Magie) --- */
.brigandyne2-roll .weapon-damage {
    margin-top: 10px;
    padding: 8px;
    border-radius: 4px;
    text-align: center;
    background: rgba(0,0,0,0.6);
    border: 1px solid #555;
}
.brigandyne2-roll .weapon-damage.success-box { 
    border-color: #1a5b1a; 
}
.brigandyne2-roll .weapon-damage.crit-box { 
    border-color: #d4af37; 
    box-shadow: inset 0 0 8px rgba(212, 175, 55, 0.3);
}
.brigandyne2-roll .weapon-damage.counter-attack-box { 
    border-color: #ff5252; 
    background: rgba(139, 0, 0, 0.3); 
}